<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Store</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f0f0;
        }
        #header {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        #header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        #auth-container {
            display: flex;
        }
        #auth-container button {
            background-color: white;
            color: #4CAF50;
            border: 1px solid #4CAF50;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
            transition: background-color 0.3s;
        }
        #auth-container button:hover {
            background-color: #e0e0e0;
        }
        #product-showcase {
            margin-top: 20px;
            text-align: center;
            width: 80%;
        }
        #product-container {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            width: 100%;
            margin-top: 20px;
        }
        #product-list {
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-start;
            width: 70%;
        }
        .product-card {
            border: 1px solid #ccc;
            border-radius: 8px;
            margin: 10px;
            padding: 15px;
            background-color: white;
            width: 200px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }
        .product-card:hover {
            transform: scale(1.05);
        }
        .product-title {
            font-size: 1.2em;
            margin: 10px 0;
        }
        .product-price {
            color: green;
            font-weight: bold;
        }
        .strike-price {
            text-decoration: line-through;
            color: red;
            margin-left: 10px;
        }
        .cart-btn {
            background-color: #4CAF50;
            color: white;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.3s;
        }
        .cart-btn:hover {
            background-color: #45a049;
        }
        #cart-container {
            width: 25%;
            background: #fff;
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 15px;
            position: fixed;
            right: 20px;
            top: 100px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        #cart-title {
            font-size: 1.5em;
            margin-bottom: 10px;
        }
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 10px 0;
        }
        .cart-item input {
            width: 40px;
            margin-right: 10px;
        }
        #filter-sort-container {
            width: 80%;
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .filter-sort {
            margin: 10px;
        }
        .remove-btn {
            background: none;
            color: red;
            border: none;
            cursor: pointer;
            font-size: 1.2em;
        }
        .remove-btn:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>

<div id="header">
    <h1>Product Showcase</h1>
    <div id="auth-container">
        <button id="loginBtn">Login</button>
        <button id="signupBtn">Signup</button>
    </div>
</div>

<div id="filter-sort-container">
    <div class="filter-sort">
        <label for="categoryFilter">Filter by Category:</label>
        <select id="categoryFilter" onchange="filterProducts()">
            <option value="">All Categories</option>
            <option value="Electronics">Electronics</option>
            <option value="Clothing">Clothing</option>
            <option value="Home Appliances">Home Appliances</option>
        </select>
    </div>
    <div class="filter-sort">
        <label for="sortOrder">Sort By:</label>
        <select id="sortOrder" onchange="sortProducts()">
            <option value="default">Default</option>
            <option value="priceAsc">Price: Low to High</option>
            <option value="priceDesc">Price: High to Low</option>
            <option value="alphaAsc">Alphabetical: A-Z</option>
            <option value="alphaDesc">Alphabetical: Z-A</option>
            <option value="ratingDesc">Rating: High to Low</option>
        </select>
    </div>
</div>

<div id="product-showcase">
    <h2>Our Products</h2>
</div>

<div id="product-container">
    <div id="product-list"></div>
    <div id="cart-container">
        <h2 id="cart-title">Cart</h2>
        <div id="cart-items"></div>
        <div>Total: $<span id="cart-total">0.00</span></div>
    </div>
</div>

<!-- Login/Signup Modals -->
<div id="logout-container" style="display:none;">
    <span id="username"></span>
    <button id="logoutBtn">Logout</button>
</div>

<!-- Login Modal -->
<div id="loginModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal(loginModal)">&times;</span>
        <h2>Login</h2>
        <input type="email" id="loginEmail" placeholder="Email">
        <input type="password" id="loginPassword" placeholder="Password">
        <button onclick="handleLogin()">Login</button>
    </div>
</div>

<!-- Signup Modal -->
<div id="signupModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal(signupModal)">&times;</span>
        <h2>Signup</h2>
        <input type="email" id="signupEmail" placeholder="Email">
        <input type="password" id="signupPassword" placeholder="Password">
        <button onclick="handleSignup()">Signup</button>
    </div>
</div>

<script>
    const products = [
        
  {
    "id": 1,
    "title": "Wireless Bluetooth Headphones",
    "description": "High-quality wireless headphones with noise cancellation and long battery life.",
    "price": 49.99,
    "strikePrice": 79.99,
    "quantity": 120,
    "category": "Electronics",
    "images": ["https://via.placeholder.com/150","https://via.placeholder.com/150",""],
    "reviews" : []
  },
  {
    "id": 2,
    "title": "Smartphone with 128GB Storage",
    "description": "A smartphone with 128GB storage, 8GB RAM, and a 48MP camera.",
    "price": 599.99,
    "strikePrice": 699.99,
    "quantity": 85,
    "category": "Electronics",
    "images": ["https://via.placeholder.com/150","","https://via.placeholder.com/150"],
    "reviews" : []
  },
  {
    "id": 3,
    "title": "4K Ultra HD Smart TV",
    "description": "55-inch 4K Ultra HD Smart TV with built-in streaming apps.",
    "price": 449.99,
    "strikePrice": 549.99,
    "quantity": 30,
    "category": "Electronics",
    "images": ["","https://via.placeholder.com/150","https://via.placeholder.com/150"],
    "reviews" : []
  },
  {
    "id": 4,
    "title": "Gaming Laptop",
    "description": "High-performance gaming laptop with Intel i7, 16GB RAM, and RTX 3060.",
    "price": 1199.99,
    "strikePrice": 1399.99,
    "quantity": 50,
    "category": "Electronics",
    "images": ["https://via.placeholder.com/150","","https://via.placeholder.com/150"],
    "reviews" : []
  },
  {
    "id": 5,
    "title": "Fitness Smartwatch",
    "description": "Smartwatch with heart rate monitor, GPS, and step tracker.",
    "price": 129.99,
    "strikePrice": 199.99,
    "quantity": 150,
    "category": "Wearables",
    "images": ["","https://via.placeholder.com/150","https://via.placeholder.com/150"],
    "reviews" : []
  },
  {
    "id": 6,
    "title": "Portable Bluetooth Speaker",
    "description": "Compact and powerful speaker with deep bass and 10-hour battery life.",
    "price": 39.99,
    "strikePrice": 59.99,
    "quantity": 200,
    "category": "Electronics",
    "images": [
      "https://via.placeholder.com/150",
      "",
      "https://via.placeholder.com/150"
    ],
    "reviews" : []
  },
  {
    "id": 7,
    "title": "Stainless Steel Water Bottle",
    "description": "Insulated water bottle that keeps drinks cold for 24 hours.",
    "price": 14.99,
    "strikePrice": 24.99,
    "quantity": 300,
    "category": "Home & Kitchen",
    "images": [
      "",
      "https://via.placeholder.com/150",
      "https://via.placeholder.com/150"
    ],
    "reviews" : []
  },
  {
    "id": 8,
    "title": "Ergonomic Office Chair",
    "description": "Comfortable office chair with lumbar support and adjustable height.",
    "price": 179.99,
    "strikePrice": 249.99,
    "quantity": 45,
    "category": "Furniture",
    "images": [
      "https://via.placeholder.com/150",
      "",
      "https://via.placeholder.com/150"
    ],
    "reviews" : []
  },
  {
    "id": 9,
    "title": "Wireless Charging Pad",
    "description": "Fast wireless charging pad compatible with all Qi-enabled devices.",
    "price": 24.99,
    "strikePrice": 34.99,
    "quantity": 170,
    "category": "Electronics",
    "images": [
      "",
      "https://via.placeholder.com/150",
      "https://via.placeholder.com/150"
    ],
    "reviews" : []
  },
  {
    "id": 10,
    "title": "Action Camera 4K",
    "description": "Waterproof action camera with 4K recording and wide-angle lens.",
    "price": 99.99,
    "strikePrice": 149.99,
    "quantity": 75,
    "category": "Cameras",
    "images": [
      "https://via.placeholder.com/150",
      "",
      "https://via.placeholder.com/150"
    ],
    "reviews" : []
  },
  {
    "id": 11,
    "title": "Wireless Earbuds with Charging Case",
    "description": "Compact and lightweight earbuds with a 24-hour battery life and charging case.",
    "price": 59.99,
    "strikePrice": 79.99,
    "quantity": 150,
    "category": "Electronics",
    "images": [
      "https://via.placeholder.com/150",
      "",
      "https://via.placeholder.com/150"
    ],
    "reviews" : []
  },
  {
    "id": 12,
    "title": "Electric Standing Desk",
    "description": "Adjustable height standing desk with motorized lift and memory settings.",
    "price": 349.99,
    "strikePrice": 499.99,
    "quantity": 20,
    "category": "Furniture",
    "images": [
      "",
      "https://via.placeholder.com/150",
      "https://via.placeholder.com/150"
    ],
    "reviews" : []
  },
  {
    "id": 13,
    "title": "Noise-Cancelling Headphones",
    "description": "Over-ear headphones with active noise-cancelling and 30-hour battery life.",
    "price": 89.99,
    "strikePrice": 129.99,
    "quantity": 60,
    "category": "Electronics",
    "images": [
      "https://via.placeholder.com/150",
      "https://via.placeholder.com/150",
      ""
    ],
    "reviews" : []
  },
  {
    "id": 14,
    "title": "Smart Thermostat",
    "description": "Wi-Fi enabled smart thermostat that allows temperature control via smartphone.",
    "price": 129.99,
    "strikePrice": 179.99,
    "quantity": 45,
    "category": "Home Appliances",
    "images": [
      "",
      "https://via.placeholder.com/150",
      "https://via.placeholder.com/150"
    ],
    "reviews" : []
  },
  {
    "id": 15,
    "title": "Mechanical Gaming Keyboard",
    "description": "RGB backlit mechanical keyboard with programmable keys and fast response.",
    "price": 69.99,
    "strikePrice": 99.99,
    "quantity": 100,
    "category": "Electronics",
    "images": [
      "https://via.placeholder.com/150",
      "",
      "https://via.placeholder.com/150"
    ],
    "reviews" : []
  },
  {
    "id": 16,
    "title": "Stainless Steel Cookware Set",
    "description": "10-piece stainless steel cookware set with non-stick coating.",
    "price": 149.99,
    "strikePrice": 199.99,
    "quantity": 80,
    "category": "Home & Kitchen",
    "images": [
      "",
      "https://via.placeholder.com/150",
      "https://via.placeholder.com/150"
    ],
    "reviews" : []
  },
  {
    "id": 17,
    "title": "Fitness Tracker with Heart Rate Monitor",
    "description": "Fitness tracker that monitors heart rate, sleep, and steps.",
    "price": 49.99,
    "strikePrice": 79.99,
    "quantity": 220,
    "category": "Wearables",
    "images": [
      "https://via.placeholder.com/150",
      "",
      "https://via.placeholder.com/150"
    ],
    "reviews" : []
  },
  {
    "id": 18,
    "title": "LED Desk Lamp with USB Charging Port",
    "description": "Dimmable LED desk lamp with adjustable brightness and built-in USB port.",
    "price": 34.99,
    "strikePrice": 49.99,
    "quantity": 110,
    "category": "Home & Kitchen",
    "images": [
      "",
      "https://via.placeholder.com/150",
      "https://via.placeholder.com/150"
    ],
    "reviews" : []
  },
  {
    "id": 19,
    "title": "Air Purifier for Home",
    "description": "HEPA air purifier with 3-stage filtration and coverage up to 500 sq. ft.",
    "price": 89.99,
    "strikePrice": 129.99,
    "quantity": 60,
    "category": "Home Appliances",
    "images": [
      "https://via.placeholder.com/150",
      "",
      "https://via.placeholder.com/150"
    ],
    "reviews" : []
  },
  {
    "id": 20,
    "title": "Digital Photo Frame",
    "description": "Wi-Fi enabled digital photo frame that can display photos and videos.",
    "price": 99.99,
    "strikePrice": 149.99,
    "quantity": 75,
    "category": "Electronics",
    "images": [
      "",
      "https://via.placeholder.com/150",
      "https://via.placeholder.com/150"
    ],
    "reviews" : []
  }
    ];

    let users = JSON.parse(localStorage.getItem('users')) || [];
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;

    const productList = document.getElementById('product-list');
    const cartItems = document.getElementById('cart-items');
    const cartTotal = document.getElementById('cart-total');
    const loginModal = document.getElementById('loginModal');
    const signupModal = document.getElementById('signupModal');
    const usernameSpan = document.getElementById('username');
    const loginBtn = document.getElementById('loginBtn');
    const signupBtn = document.getElementById('signupBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    const categoryFilter = document.getElementById('categoryFilter');
    const sortOrder = document.getElementById('sortOrder');

    // Display Products
    function displayProducts(filteredProducts = products) {
        productList.innerHTML = filteredProducts.map(product => `
            <div class="product-card">
                <img src="${product.images[0]}" alt="${product.title}">
                <h3 class="product-title">${product.title}</h3>
                <p>${product.description}</p>
                <p class="product-price">$${product.price.toFixed(2)} <span class="strike-price">$${product.strikePrice.toFixed(2)}</span></p>
                <button class="cart-btn" onclick="addToCart(${product.id})">Add to Cart</button>
                <div>
                    <textarea id="review-${product.id}" placeholder="Leave a review"></textarea>
                    <select id="rating-${product.id}">
                        <option value="">Rate</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                    <button onclick="submitReview(${product.id})">Submit Review</button>
                </div>
            </div>
        `).join('');
        updateCartDisplay();
    }

    // Filter Products
    function filterProducts() {
        const selectedCategory = categoryFilter.value;
        const filteredProducts = products.filter(product => {
            return selectedCategory === "" || product.category === selectedCategory;
        });
        displayProducts(filteredProducts);
        sortProducts(); // Ensure sorting is applied after filtering
    }

    // Sort Products
    function sortProducts() {
        let sortedProducts = [...products];
        const sortValue = sortOrder.value;

        if (sortValue === 'priceAsc') {
            sortedProducts.sort((a, b) => a.price - b.price);
        } else if (sortValue === 'priceDesc') {
            sortedProducts.sort((a, b) => b.price - a.price);
        } else if (sortValue === 'alphaAsc') {
            sortedProducts.sort((a, b) => a.title.localeCompare(b.title));
        } else if (sortValue === 'alphaDesc') {
            sortedProducts.sort((a, b) => b.title.localeCompare(a.title));
        } else if (sortValue === 'ratingDesc') {
            sortedProducts.sort((a, b) => {
                const avgA = a.reviews.length ? (a.reviews.reduce((acc, curr) => acc + curr.rating, 0) / a.reviews.length) : 0;
                const avgB = b.reviews.length ? (b.reviews.reduce((acc, curr) => acc + curr.rating, 0) / b.reviews.length) : 0;
                return avgB - avgA;
            });
        }

        // Re-apply filter after sorting
        const selectedCategory = categoryFilter.value;
        const filteredProducts = sortedProducts.filter(product => {
            return selectedCategory === "" || product.category === selectedCategory;
        });
        displayProducts(filteredProducts);
    }

    // Add to Cart
    function addToCart(productId) {
        const product = products.find(p => p.id === productId);
        const cartItem = cart.find(item => item.id === productId);
        if (cartItem) {
            cartItem.quantity += 1;
        } else {
            cart.push({ ...product, quantity: 1 });
        }
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartDisplay();
    }

    // Update Cart Display
    function updateCartDisplay() {
        cartItems.innerHTML = cart.map(item => `
            <div class="cart-item">
                <span>${item.title}</span>
                <input type="number" value="${item.quantity}" min="1" onchange="updateQuantity(${item.id}, this.value)">
                <span>$${(item.price * item.quantity).toFixed(2)}</span>
                <button class="remove-btn" onclick="removeFromCart(${item.id})">&times;</button>
            </div>
        `).join('');
        const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
        cartTotal.textContent = total.toFixed(2);
    }

    // Update Quantity
    function updateQuantity(productId, quantity) {
        const cartItem = cart.find(item => item.id === productId);
        if (cartItem) {
            cartItem.quantity = parseInt(quantity);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
        }
    }

    // Remove from Cart
    function removeFromCart(productId) {
        cart = cart.filter(item => item.id !== productId);
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartDisplay();
    }

    // Submit Review
    function submitReview(productId) {
        if (!currentUser) {
            alert("You must be logged in to leave a review.");
            return;
        }
        const reviewText = document.getElementById(`review-${productId}`).value;
        const ratingValue = document.getElementById(`rating-${productId}`).value;
        if (reviewText && ratingValue) {
            const product = products.find(p => p.id === productId);
            product.reviews.push({ text: reviewText, rating: parseInt(ratingValue), user: currentUser.email });
            alert("Review submitted!");
        } else {
            alert("Please provide a review and a rating.");
        }
    }

    // Handle Login
    function handleLogin() {
        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;
        const user = users.find(u => u.email === email && u.password === password);

        if (user) {
            currentUser = user;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            alert("Login successful!");
            updateUI();
            closeModal(loginModal);
        } else {
            alert("Invalid email or password.");
        }
    }

    // Handle Signup
    function handleSignup() {
        const email = document.getElementById('signupEmail').value;
        const password = document.getElementById('signupPassword').value;
        if (users.find(u => u.email === email)) {
            alert("Email already registered. Please log in.");
            return;
        }
        users.push({ email, password });
        localStorage.setItem('users', JSON.stringify(users));
        alert("Signup successful! Please log in.");
        closeModal(signupModal);
    }

    // Logout
    function logout() {
        currentUser = null;
        localStorage.removeItem('currentUser');
        alert("Logged out successfully!");
        updateUI();
    }

    // Update UI based on authentication status
    function updateUI() {
        if (currentUser) {
            usernameSpan.textContent = `Welcome, ${currentUser.email}`;
            document.getElementById('auth-container').style.display = 'none';
            document.getElementById('logout-container').style.display = 'block';
        } else {
            document.getElementById('auth-container').style.display = 'flex';
            document.getElementById('logout-container').style.display = 'none';
        }
        displayProducts();
    }

    // Modal functions
    function closeModal(modal) {
        modal.style.display = "none";
    }

    window.onclick = function(event) {
        if (event.target == loginModal || event.target == signupModal) {
            closeModal(loginModal);
            closeModal(signupModal);
        }
    };

    loginBtn.onclick = function() {
        loginModal.style.display = "block";
    };

    signupBtn.onclick = function() {
        signupModal.style.display = "block";
    };

    logoutBtn.onclick = logout;

    // Initialize UI
    updateUI();
</script>
</body>
</html>
